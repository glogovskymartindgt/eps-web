<div class="basic-screen-header" fxLayout="row">
    <div class="pl-50" fxFlex="50" fxLayoutAlign="start center">
        <h3>{{'profile.detailTitle' | translate}}</h3>
    </div>
</div>

<form [formGroup]="profileDetailForm" style="height: calc(100vh - 160px);">
    <div class="p-30" fxLayout="row" fxLayoutGap="10px">
        <div fxFlex="100px" fxLayout="column">
            <div class="short-input">
                <div class="relative-parent">
                    <label class="avatar-container-style"
                           for="avatar-image"
                           fxFlex="100px"
                           mat-ripple
                    ></label>
                    <input (change)="onImageChanged($event)"
                           accept="image/*"
                           class="hide-input"
                           formControlName="avatar"
                           id="avatar-image"
                           type="file"
                    >
                    <div class="avatar-content-style avatar-content-style-edit">
                        <img [src]="imageSrc"
                             alt="profile avatar"
                             class="profile-avatar"
                             height="90"
                        >
                        <div class="edit-svg-wrapper">
                            <img
                                [src]="'assets/img/svg-squares/edit.svg'"
                                alt="edit"
                                class="edit-svg"
                            >
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div fxFlex fxLayout="column" fxLayoutGap="0">
            <div fxLayout="row" fxLayoutGap="10px">
                <div class="small-input">
                    <haz-copy-core-input [appearance]="'fill'"
                                         [label]="'profile.firstName' |  translate"
                                         [maxLength]="50"
                                         [required]="true"
                                         [pattern]="notOnlyWhiteCharactersPattern"
                                         class="theme-input"
                                         formControlName="firstName"
                    >
                    </haz-copy-core-input>
                </div>

                <div class="small-input">
                    <haz-copy-core-input [appearance]="'fill'"
                                         [label]="'profile.lastName' |  translate"
                                         [maxLength]="50"
                                         [required]="true"
                                         [pattern]="notOnlyWhiteCharactersPattern"
                                         class="theme-input"
                                         formControlName="lastName"
                    >
                    </haz-copy-core-input>
                </div>
            </div>

            <div class="long-input">
                <haz-copy-core-input [appearance]="'fill'"
                                     [label]="'profile.email' |  translate"
                                     [maxLength]="50"
                                     [pattern]="emailPattern"
                                     class="theme-input"
                                     formControlName="email"
                >
                </haz-copy-core-input>
            </div>

            <div class="long-input">
                <haz-copy-core-input [appearance]="'fill'"
                                     [label]="'profile.login' |  translate"
                                     [maxLength]="50"
                                     class="theme-input"
                                     formControlName="login"
                >
                </haz-copy-core-input>
            </div>

            <div class="long-input">
                <mat-form-field appearance="fill" class="mt-8 theme-input w-full">
                    <mat-label class="label-style">{{'profile.password' | translate}}</mat-label>
                    <input [type]="hidePassword ? 'password' : 'text'"
                           class="input-style"
                           formControlName="password"
                           matInput
                    >
                    <mat-icon (click)="hidePassword = !hidePassword " class="cursor-pointer"
                              matSuffix
                              matTooltip="{{ 'login.toggleVisibility' | translate}}"
                    >
                        {{hidePassword ? 'visibility_off' : 'visibility'}}
                    </mat-icon>
                    <mat-error *ngIf="profileDetailForm?.controls?.password?.hasError('pattern')">
                        {{'profile.invalidPassword' | translate}}
                    </mat-error>
                    <mat-error *ngIf="!profileDetailForm?.controls?.password?.hasError('pattern') &&
                    profileDetailForm?.controls?.password?.hasError('maxlength')">
                        {{'hint.maxlength' | translate}}
                    </mat-error>
                </mat-form-field>
            </div>`

            <div>
                <mat-slide-toggle formControlName="state" disabled>
                    {{"profile.account" | translate}}
                    {{(this.profileDetailForm.controls.state && this.profileDetailForm.controls.state.value === 'ACTIVE' ? "profile.active" : "profile.inactive") | translate}}
                </mat-slide-toggle>
            </div>

        </div>
    </div>

    <div [@enterLeave] class="pl-130">
        <button (click)="onSave()"
                [disabled]="!this.profileDetailForm.valid"
                class="mr-10"
                color="accent"
                mat-flat-button
                type="submit"
        >
            {{ 'tasks.save' | translate }}
        </button>
        <button (click)="onCancel()"
                class="mr-10"
                mat-button
                type="button"
        >
            {{ 'tasks.cancel' | translate }}
        </button>
    </div>

</form>
