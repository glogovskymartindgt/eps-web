<form [formGroup]="factForm">
    <div>
        <mat-form-field appearance="fill" class="long-input">
            <mat-label>{{'fact.category' | translate}}</mat-label>
            <mat-select formControlName="category" required>
                <ng-container *ngIf="!formLoaded">
                    <mat-option *ngFor="let category of categories; trackBy:trackCategoryById" [value]="category.id">
                        {{ category.name }}
                    </mat-option>
                </ng-container>
                <mat-option *ngIf="formLoaded" [value]="factForm?.value?.category">
                    {{factForm?.value?.category}}
                </mat-option>
            </mat-select>

            <mat-error *ngIf="controls?.category?.errors?.required">
                {{ 'error.required' | translate }}
            </mat-error>
        </mat-form-field>
    </div>

    <div *ngIf="subCategories !== null || formLoaded" [@enterLeaveSmooth]>
        <mat-form-field appearance="fill" class="long-input">
            <mat-label>{{'fact.factItemType' | translate}}</mat-label>
            <mat-select formControlName="subCategory" required>
                <ng-container *ngIf="subCategories && subCategories.length && !formLoaded">
                    <mat-option *ngFor="let subcategory of subCategories; trackBy:trackSubCategoryById" [value]="subcategory.id">
                        <span class="fact-text">{{ subcategory.subCategory }}</span>
                    </mat-option>
                </ng-container>
                <mat-option
                    *ngIf="subCategories && subCategories.length === 0 && !formLoaded"
                >{{'all.empty' | translate}}</mat-option>
                <mat-option *ngIf="formLoaded" [value]="factForm?.value?.subCategory">
                    {{factForm?.value?.subCategory}}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="controls?.subCategory?.errors?.required">
                {{ 'error.required' | translate }}
            </mat-error>
        </mat-form-field>
    </div>

    <div class="long-input">
        <haz-core-input [allowedCharactersPattern]="decimalPattern"
                        [handleFocusAndBlur]='true'
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="firstVenueLabel"
                        [maxLength]="15"
                        [required]="'isFirstValueRequired'"
                        [textSuffix]="actualUnitShortName"
                        appearance="fill"
                        formControlName="firstValue"
        >
        </haz-core-input>
    </div>
    <div class="long-input">
        <haz-core-input [allowedCharactersPattern]="decimalPattern"
                        [handleFocusAndBlur]='true'
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="secondVenueLabel"
                        [maxLength]="15"
                        [required]="'isSecondValueRequired'"
                        [textSuffix]="actualUnitShortName"
                        appearance="fill"
                        formControlName="secondValue"
        >
        </haz-core-input>
    </div>
    <div class="mb-20">
        <mat-checkbox formControlName="hasOnlyTotalValue">{{'fact.hasOnlyTotalValue' | translate}}</mat-checkbox>
    </div>
    <div class="long-input">
        <haz-core-input [allowedCharactersPattern]="decimalPattern"
                        [handleFocusAndBlur]='true'
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="'fact.totalValue' | translate"
                        [maxLength]="15"
                        [required]="'isTotalRequired'"
                        [textSuffix]="actualUnitShortName"
                        appearance="fill"
                        formControlName="totalValue"
        >
        </haz-core-input>
    </div>

    <div class="long-input">
        <haz-core-input [appearance]="'fill'"
                        [label]="'fact.description' | translate"
                        [maxLength]="4092"
                        [type]="'textarea'"
                        class="theme-input"
                        formControlName="description"
        >
        </haz-core-input>
    </div>

    <div *ngIf="formLoaded" class="long-input">
        <haz-core-input [appearance]="'fill'"
                        [label]="'fact.changedAt' |  translate"
                        class="theme-input"
                        formControlName="changedAt"
        >
        </haz-core-input>
    </div>

    <div *ngIf="formLoaded" class="long-input">
        <haz-core-input [appearance]="'fill'"
                        [label]="'fact.changedBy' | translate"
                        class="theme-input"
                        formControlName="changedBy"
        >
        </haz-core-input>
    </div>

</form>
