<form [formGroup]="factForm">
    <div>
        <mat-form-field appearance="fill" class="long-input">
            <mat-label>{{'fact.category' | translate}}</mat-label>
            <mat-select formControlName="category" required (selectionChange)="categoryChange($event)">
                <ng-container>
                    <mat-option *ngFor="let category of categories; trackBy:trackCategoryById" [value]="category.id" >
                        {{ category.name }}
                    </mat-option>
                </ng-container>
            </mat-select>

            <mat-error *ngIf="controls?.category?.errors?.required">
                {{ 'error.required' | translate }}
            </mat-error>
        </mat-form-field>
    </div>
    <div *ngIf="subCategories !== null || formLoaded" [@enterLeaveSmooth]>
        <mat-form-field appearance="fill" class="long-input">
            <mat-label>{{'fact.factItemType' | translate}}</mat-label>
            <mat-select formControlName="subCategory" required (selectionChange)="subCategoryChange($event)">
                <ng-container *ngIf="subCategories && subCategories.length">
                    <mat-option *ngFor="let subcategory of subCategories; trackBy:trackSubCategoryById" [value]="subcategory.id">
                        <span class="fact-text">{{ subcategory.subCategory }}</span>
                    </mat-option>
                </ng-container>
                <mat-option
                    *ngIf="subCategories && subCategories.length === 0"
                >{{'all.empty' | translate}}</mat-option>
            </mat-select>
            <mat-error *ngIf="controls?.subCategory?.errors?.required">
                {{ 'error.required' | translate }}
            </mat-error>
        </mat-form-field>
    </div>

    <ng-container *ngIf="!isYesNoFactItemType">
        <div class="long-input">
            <haz-copy-core-input [allowedCharactersPattern]="decimalPattern"
                                 [handleFocusAndBlur]="true"
                                 [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                                 [label]="firstVenueLabel"
                                 [maxLength]="15"
                                 [required]="'isFirstValueRequired'"
                                 [textSuffix]="actualUnitShortName"
                                 appearance="fill"
                                 formControlName="firstValue"
            >
            </haz-copy-core-input>
        </div>
        <div class="long-input">
            <haz-copy-core-input [allowedCharactersPattern]="decimalPattern"
                                 [handleFocusAndBlur]="true"
                                 [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                                 [label]="secondVenueLabel"
                                 [maxLength]="15"
                                 [required]="'isSecondValueRequired'"
                                 [textSuffix]="actualUnitShortName"
                                 appearance="fill"
                                 formControlName="secondValue"
            >
            </haz-copy-core-input>
        </div>
        <div class="long-input" *ngIf="showThirdVenue">
            <haz-copy-core-input [allowedCharactersPattern]="decimalPattern"
                                 [handleFocusAndBlur]="true"
                                 [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                                 [label]="thirdVenueLabel"
                                 [maxLength]="15"
                                 [required]="'isThirdValueRequired'"
                                 [textSuffix]="actualUnitShortName"
                                 appearance="fill"
                                 formControlName="thirdValue"
            >
            </haz-copy-core-input>
        </div>
    </ng-container>
    <ng-container *ngIf="isYesNoFactItemType">
        <div class="long-input">
            <haz-core-select
                        [handleFocusAndBlur]="true"
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="firstVenueLabel"
                        [required]="'isFirstValueRequired'"
                        [textSuffix]="actualUnitShortName"
                        appearance="fill"
                        formControlName="firstValue"
            >
            </haz-core-select>
            <haz-core-select
                        [handleFocusAndBlur]="true"
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="secondVenueLabel"
                        [required]="'isSecondValueRequired'"
                        appearance="fill"
                        formControlName="secondValue"
            >
            </haz-core-select>
            <ng-container *ngIf="showThirdVenue">
                <haz-core-select
                        [handleFocusAndBlur]="true"
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="thirdVenueLabel"
                        [required]="'isThirdValueRequired'"
                        appearance="fill"
                        formControlName="thirdValue"
                >
                </haz-core-select>
            </ng-container>
        </div>
    </ng-container>
    <div class="mb-20">
        <mat-checkbox formControlName="hasOnlyTotalValue">{{'fact.hasOnlyTotalValue' | translate}}</mat-checkbox>
    </div>

    <ng-container *ngIf="!isYesNoFactItemType">
        <div class="long-input">
            <haz-copy-core-input [allowedCharactersPattern]="decimalPattern"
                                 [handleFocusAndBlur]="true"
                                 [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                                 [label]="'fact.totalValue' | translate"
                                 [maxLength]="15"
                                 [required]="'isTotalRequired'"
                                 [textSuffix]="actualUnitShortName"
                                 appearance="fill"
                                 formControlName="totalValue"
            >
            </haz-copy-core-input>
        </div>
    </ng-container>
    <ng-container *ngIf="isYesNoFactItemType">
        <div class="long-input">
            <haz-core-select
                        [handleFocusAndBlur]="true"
                        [inputStyles]="{width: '100%', 'position': 'relative', 'right': '5px', 'text-align': 'right'}"
                        [label]="'fact.totalValue' | translate"
                        [required]="'isTotalRequired'"
                        [textSuffix]="actualUnitShortName"
                        appearance="fill"
                        formControlName="totalValue"
            >
            </haz-core-select>
        </div>
    </ng-container>

    <div class="long-input">
        <haz-copy-core-input [appearance]="'fill'"
                             [label]="'fact.description' | translate"
                             [maxLength]="4092"
                             [type]="'textarea'"
                             class="theme-input"
                             formControlName="description"
        >
        </haz-copy-core-input>
    </div>

    <div *ngIf="formLoaded" class="long-input">
        <haz-copy-core-input [appearance]="'fill'"
                             [label]="'fact.changedAt' |  translate"
                             class="theme-input"
                             formControlName="changedAt"
        >
        </haz-copy-core-input>
    </div>

    <div *ngIf="formLoaded" class="long-input">
        <haz-copy-core-input [appearance]="'fill'"
                             [label]="'fact.changedBy' | translate"
                             class="theme-input"
                             formControlName="changedBy"
        >
        </haz-copy-core-input>
    </div>

</form>
